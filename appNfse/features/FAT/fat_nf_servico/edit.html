<luar-crud crud="ctrl" title="Nota de Serviço - NFS-e">

    <luar-list list="ctrl.lista" ng-show="!Cadastro">
        <column id="NUMERO" title="Nro Nota" searchable="true"></column>
        <column id="SERIE" title="Série" searchable="false"></column>
        <column id="DATA_EMISSAO" title="Data Emissão" searchable="true" type="date"></column>
        <column id="DATA_VENCIMENTO" title="Data Vencimento" searchable="true" type="date"></column>
        <column id="VALOR_TOTAL" title="Valor Total" searchable="false"></column>
        <column id="VALOR_LIQUIDO" title="Valor Liquido" searchable="false"></column>
        <column id="SITUACAO" title="Situação" searchable="true"></column>
        <column id="COD_CADCLI" title="Cliente" searchable="true"></column>
        <luar-table></luar-table>
    </luar-list>

    <luar-main-form ng-show="Cadastro">
        <tabset>
            <tab heading="Dados Gerais">
                <tab-heading> Dados Gerais </tab-heading>
                <fieldset>
                    <div class="row">
                        <luar-text container-class="col-md-1" label="Série" required name="serie" ng-model="ctrl.currentRecord.SERIE">
                        </luar-text>
                        <luar-text container-class="col-md-2" label="Nro Nota" readonly name="codigo" ng-model="ctrl.currentRecord.NUMERO">
                        </luar-text>
                        <luar-textdata required container-class="col-md-2" label="Data Emissão"
                                   name="dataemissao" ng-model="ctrl.currentRecord.DATA_EMISSAO">
                        </luar-textdata>
                        <luar-textdata required container-class="col-md-2" label="Data Vencimento"
                                   name="datavencimento" ng-model="ctrl.currentRecord.DATA_VENCIMENTO">
                        </luar-textdata>
                    </div>

                    <div class="row">
                        <luar-select container-class="col-md-3" label="Condição de Pagamento" name="COD_CADCPAG" required
                                     ng-options="item.id as item.NOME for item in ::ctrl.CondPagamentoLook"
                                     ng-model="ctrl.currentRecord.COD_CADCPAG">
                        </luar-select>

                        <luar-select container-class="col-md-3" label="Local Cobrança" name="COD_CADBANCO" required
                                     ng-options="item.id as item.NOME for item in ::ctrl.CadBancoLook"
                                     ng-model="ctrl.currentRecord.COD_CADBANCO">
                        </luar-select>

                        <luar-select container-class="col-md-2" label="Mês Competência" name="MES_COMPETENCIA"
                                     ng-options="item.id as item.NOME for item in ::ctrl.MesesLook"
                                     ng-model="ctrl.currentRecord.MES_COMPETENCIA">
                        </luar-select>

                        <luar-select container-class="col-md-2" label="Ano Competência" name="ANO_COMPETENCIA"
                                     ng-options="item.id as item.NOME for item in ::ctrl.AnosLook"
                                     ng-model="ctrl.currentRecord.ANO_COMPETENCIA">
                        </luar-select>

                    </div>
                    
                    <div class="row">
                        <luar-text container-class="col-md-12" label="Cliente"
                                   name="COD_CADCLI" required style="display:none" ng-model="ctrl.currentRecord.COD_CADCLI">
                        </luar-text>

                        <div class="col-md-12 ng-scope" name="cliente">
                            <md-autocomplete flex
                                             md-selected-item="ctrl.selectedItem"
                                             md-search-text="ctrl.searchText"
                                             md-selected-item-change="ctrl.selectedItemChange(item)"
                                             md-items="item in ctrl.querySearch(ctrl.searchText)"
                                             md-item-text="item.FANTASIA"
                                             md-delay="300"
                                             md-min-length="2"
                                             placeholder="Pesquisar Clientes">
                                <div layout="row" class="item" layout-align="start center">
                                    <span md-highlight-text="ctrl.searchText">{{item.FANTASIA}}</span>
                                    <label> &nbsp; - ({{item.CODIGO}})</label>
                                </div>
                            </md-autocomplete>
                        </div>
                    </div>

                    <div class="row">
                        <luar-textvalor container-class="col-md-2" label="Valor Total" required name="valorTotal"
                                   ng-model="ctrl.currentRecord.VALOR_TOTAL">
                        </luar-textvalor>
                        <luar-textvalor container-class="col-md-2" label="Valor Liquido" required name="valorLiquido"
                                   ng-model="ctrl.currentRecord.VALOR_LIQUIDO">
                        </luar-textvalor>
                        <luar-textvalor container-class="col-md-2" label="Valor Desconto" name="valorDesconto"
                                   ng-model="ctrl.currentRecord.VALOR_DESCONTO">
                        </luar-textvalor>

                        <luar-select container-class="col-md-6" label="Natureza" name="NATUREZA_OPERACAO"
                                     ng-options="item.id as item.DESCRICAO for item in ::ctrl.NaturezaLook"
                                     ng-model="ctrl.currentRecord.NATUREZA_OPERACAO">
                        </luar-select>
                    </div>

                    <div class="row">
                        <luar-select container-class="col-md-6" label="Tipo de Serviço" name="COD_CADSERVICO"
                                     ng-options="item.id as item.NOME for item in ::ctrl.CadServicoLook"
                                     ng-model="ctrl.currentRecord.COD_CADSERVICO">
                        </luar-select>
                    </div>

                    <tabset>
                        <tab heading="Observações">
                            <tab-heading> Observações </tab-heading>
                            <fieldset>
                                <luar-textarea container-class="col-md-12" label="Descriminação" required name="DISCRIMINACAO"
                                           ng-model="ctrl.currentRecord.DISCRIMINACAO">
                                </luar-textarea>
                                <luar-textarea container-class="col-md-12" style="height: 150px" readonly name="OBS_MONTADA"
                                               ng-model="ctrl.currentRecord.OBS_MONTADA">
                                </luar-textarea>
                            </fieldset>
                        </tab>

                        <tab heading="Imposto">
                            <tab-heading> Imposto </tab-heading>
                            <fieldset>
                                <luar-textvalor container-class="col-md-2" label="ISSQN Base" required name="ISSQN_BASE"
                                           ng-model="ctrl.currentRecord.ISSQN_BASE">
                                </luar-textvalor>
                            </fieldset>
                        </tab>
                    </tabset>
                </fieldset>
            </tab>
        </tabset>

    </luar-main-form>

</luar-crud>




